<!DOCTYPE html>

<html>

<head>
<title>Cs296 Project</title>
<style>
body{margin-right:10em; margin-left:10em;font-family: "Open Sans", sans-serif;}
h1{text-align:center;color:#339933;text-transform:capitalize;}
h2{color:#336633;text-transform:capitalize;}
h3{color:#336633;text-transform:capitalize;}
table,td
{
border:1px solid black;
}
table
{
width:200%
border-collapse:collapse;
}
.txt {font-size:24px;}
</style>
</head>
<body>
<div class="txt"><h1>Introduction</h1>
This report explains in detail the project we created- a foosball table- in Box2d. We describe in brief the bodies,fixtures and constraints we used to create this simulation.<br>
Here is the initial model of our simulation:<br>
\includegraphics[width=100pt,height=100pt]{foosball}

<h1>Design</h1>
We simulated the game of foosball using a bounding table, rods and rigid bodies representing players attached to each rod. Whenever the ball enters one of the goals situated at either end, a score variable is updated and this is shown by moving one of the relevant score blocks present on either side of the table. The first team to seven goals is the winner.<br>

The simulation consists of a ball which moves around on the frictionless table colliding with everything it comes in contact with.<br>

There are (transparent) rods at relevant locations on the table, constrained to move upto a certain limit in the upward or downward direction. The players attached to each rod can be moved towards either the left or right upto a certain limit. The user also has the option to turn the rod enough to lift all its players off the table.We used the \texttt{b2PrismaticJoint} to simulate motion of these players.<br>

The simulation is heavily dependent on user input. We implemented this overloading the \texttt{keyboard()} function of the \texttt{base\_sim\_t} class of Box2D.<br>

It was a challenge for us to implement the constraints required by the nature of the game, and we think that usage of prismatic joints and using the \texttt{filter} attributes of Box2D objects to cater to all aspects of motion of the players has made our design more efficient. We also feel that using static objects to constrain the motion of the rods (as explained later) was a simple yet effective feature.<br>

<h1>Parts of the simulation</h1>

<h2>Table</h2>
The entire game is played within the confines of the table, which serves to restrict the motion of the ball and rods. This was implemented using four box shapes.<br>
%\includegraphics[width=100pt,height=100pt]{Platform}

<h2>Rods</h2>
Rods are thin dynamic \texttt{Box} objects located at appropriate locations on the table. Two pairs of small static objects are located on either side of the rod at the point where it enters and leaves the table to constrain its motion in the y direction.<br>

At any given point, only one rod per team is active. The user can change the active rod by giving a keyboard input.<br>

Each rod contains one anchor of a prismatic joint, the other end of which is connected to a Player body.<br>

<h2>Player</h2>
A player is a small,rigid and dynamic body which is attached to a rod via a prismatic joint. All players on the current active rod can be move right or left(upto a certain limit) by a keyboard input.Such a rotation has greater impact if it happens from a start position far away from the final position of the player.<br>

The user can also lift the players of a rod off the table (meaning that the ball can pass underneath them) by pressing the right motion key while the players are at the maximum right position, and similarly for the left. This can be viewed as a change in the shape(fixture) of the players.<br>

These are implemented by setting appropriate attributes on the prismatic joint and by setting the fixtures and filter bits of the players accordingly.<br>

<h2>Ball</h2>
The ball is a \texttt{b2Circle} shaped \texttt{bullet} object which keeps on moving around and being struck by the players/table walls. Scores are updated when the ball enters either of the goals.<br>

<h1>Conclusion</h1>
The simulation is identical to the old one for the intial part. When the light box flies up into the air, it knocks the new sphere onto the dominoes and all of them fall down into a new box. The old sphere comes to rest near the wall of the new box. The rest of the animation is unchanged<br>
In conclusion, we have added a few features to the simulation to make it more interesting while conserving its basic functionality <br>

<h1>References</h1>
<ul>
<li>http://www.youtube.com/watch?feature=player_detailpage&v=z_NauMiAguw#t=202/</li>
<li>http://stackoverflow.com/
</li>
<li>https://www.iforce2d.net/b2dtut/
</li>
<li>http://www.box2d.org/manual.html/
</li>
<li>Mihir Kulkarni for helping in scripts</li>
<ul>
</div> 
</body>
</html>